<!DOCTYPE html>
<html lang="cn">
<head>
    <% include("/common/meta.html"){} %>
    <title>南溟有猫</title>
</head>
<body>
<%
var articleList = obj.articleList!,
page = obj.page!,
totalPages = obj.totalPages!;
%>
<div class="container sidebar-position-left page-home">
    <% include("/common/header.html"){} %>
    <main id="main" class="main">
        <div class="main-inner">
            <div class="content-wrap">
                <div id="content" class="content">
                    <section id="posts" class="posts-expand">
                        <% for (article in articleList) { %>
                        <article class="post post-type-normal">
                            <div class="post-block" style="opacity: 1; display: block;">
                                <header class="post-header"
                                        style="opacity: 1; display: block; transform: translateY(0px);">
                                    <h2 class="post-title">
                                        <a class="post-title-link" href="/article/${article.articleId!}">
                                            ${article.title!} </a>
                                    </h2>
                                    <div class="post-meta">
                                        <span class="post-time">
                                            <span class="post-meta-item-icon">
                                                <i class="fa fa-calendar-o"></i>
                                            </span>
                                            <span class="post-meta-item-text">发表于</span>
                                            <span>${article.createTime!,'yyyy-MM-dd'}</span>
                                        </span>
                                        <span class="post-comments-count">
                                            <span class="post-meta-divider">|</span>
                                            <span class="post-meta-item-icon">
                                                <i class="fa fa-comment-o"></i>
                                            </span>
                                            <span class="post-meta-item-text">评论数：</span>
                                            <span>${article.commentList.~size!}</span>
                                        </span>
                                        <span class="leancloud_visitors">
                                            <span class="post-meta-divider">|</span>
                                            <span class="post-meta-item-icon">
                                                <i class="fa fa-eye"></i>
                                            </span>
                                            <span class="post-meta-item-text">热度：</span>
                                            <span class="leancloud-visitors-count">${article.browseVolume!}</span>
                                            <span>℃</span>
                                        </span>
                                    </div>
                                </header>
                                <div class="post-body" itemprop="articleBody"
                                     style="opacity: 1; display: block; transform: translateY(0px);">
                                    <p>
                                    <div class="three—elements-div">${article.content!}</div>
                                    </p>
                                    <!--noindex-->
                                    <div class="post-button text-center">
                                        <a class="btn" href="/article/${article.articleId}" rel="contents">阅读全文 » </a>
                                    </div>
                                    <!--/noindex-->
                                </div>
                                <footer class="post-footer">
                                    <div class="post-eof"></div>
                                </footer>
                            </div>
                        </article>
                        <% } %>
                    </section>
                    <nav class="pagination" style="opacity: 1; display: block;">
                        <%
                        if (totalPages >= 1) {
                        var begin = 0;
                        var end = 0;
                        if (totalPages <= 7) {
                        begin = 1;
                        end = totalPages;
                        } else {
                        begin = page - 1;
                        end = page + 3;
                        if (begin - 1 <= 0) {
                        begin = 1;
                        end = 6;
                        }
                        if (end > totalPages) {
                        begin = page - 5;
                        end = page;
                        }
                        }
                        %>
                        <!--遍历-->
                        <% for(var i=begin;i<end;i++){ %>
                        <!--当前页,选中-->
                        <% if (i == page) {%>
                        <span class="page-number current">${page!}</span>
                        <% } else { %>
                        <!--不是当前页-->
                        <a class="page-number" href="/${i}/">${i!}</a>
                        <% } %>
                        <% } %>
                        <% } %>
                    </nav>
                </div>
            </div>
            <% include("/common/aside.html"){} %>
        </div>
    </main>
    <% include("/common/footer.html"){} %>
</div>
</body>

</html>
